apiVersion: v1
kind: ConfigMap
metadata:
  name: bahnvision-config
  namespace: default
data:
  # CORS settings
  CORS_ALLOW_ORIGINS: "http://localhost:3000,http://127.0.0.1:3000,http://localhost,http://127.0.0.1"

  # Cache settings
  VALKEY_CACHE_TTL_SECONDS: "30"
  VALKEY_CACHE_TTL_NOT_FOUND_SECONDS: "15"
  MVG_DEPARTURES_CACHE_TTL_SECONDS: "30"
  MVG_DEPARTURES_CACHE_STALE_TTL_SECONDS: "300"
  MVG_STATION_SEARCH_CACHE_TTL_SECONDS: "60"
  MVG_STATION_SEARCH_CACHE_STALE_TTL_SECONDS: "600"
  MVG_STATION_LIST_CACHE_TTL_SECONDS: "86400"
  MVG_STATION_LIST_CACHE_STALE_TTL_SECONDS: "172800"
  MVG_ROUTE_CACHE_TTL_SECONDS: "120"
  MVG_ROUTE_CACHE_STALE_TTL_SECONDS: "900"

  # Circuit breaker settings
  CACHE_SINGLEFLIGHT_LOCK_TTL_SECONDS: "5"
  CACHE_SINGLEFLIGHT_LOCK_WAIT_SECONDS: "5.0"
  CACHE_SINGLEFLIGHT_RETRY_DELAY_SECONDS: "0.05"
  CACHE_CIRCUIT_BREAKER_TIMEOUT_SECONDS: "2.0"

  # Database settings
  DATABASE_POOL_SIZE: "5"
  DATABASE_MAX_OVERFLOW: "5"
  DATABASE_ECHO: "false"

  # OpenTelemetry settings
  OTEL_ENABLED: "true"
  OTEL_SERVICE_NAME: "bahnvision-backend"
  OTEL_SERVICE_VERSION: "0.1.0"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://jaeger:4317"
  OTEL_PROPAGATORS: "tracecontext,baggage,b3"